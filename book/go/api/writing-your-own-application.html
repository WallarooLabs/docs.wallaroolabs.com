
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Writing Your Own Application · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="writing-your-own-stateful-application.html" />
    
    
    <link rel="prev" href="wallaroo-go-api.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../what-is-wallaroo.html">
            
                <a href="../../what-is-wallaroo.html">
            
                    
                    What is Wallaroo?
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Core Concepts</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../core-concepts/intro.html">
            
                <a href="../../core-concepts/intro.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../core-concepts/core-concepts.html">
            
                <a href="../../core-concepts/core-concepts.html">
            
                    
                    Introducing Wallaroo Core Concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../core-concepts/state.html">
            
                <a href="../../core-concepts/state.html">
            
                    
                    State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../core-concepts/working-with-state.html">
            
                <a href="../../core-concepts/working-with-state.html">
            
                    
                    Working with State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../core-concepts/partitioning.html">
            
                <a href="../../core-concepts/partitioning.html">
            
                    
                    Partitioning
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Wallaroo Language Support</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../language_support.html">
            
                <a href="../../language_support.html">
            
                    
                    Wallaroo Languages Supported
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Wallaroo with Python</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../python/intro.html">
            
                <a href="../../python/intro.html">
            
                    
                    Wallaroo with Python Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../getting-started/setting-up-your-environment.html">
            
                <a href="../../getting-started/setting-up-your-environment.html">
            
                    
                    Setting up Your Environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../../getting-started/choosing-an-installation-option.html">
            
                <a href="../../getting-started/choosing-an-installation-option.html">
            
                    
                    Choosing an Installation Option
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../../getting-started/installing-with-docker.html">
            
                <a href="../../getting-started/installing-with-docker.html">
            
                    
                    Installing with Docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.2.1" data-path="../../getting-started/docker-setup.html">
            
                <a href="../../getting-started/docker-setup.html">
            
                    
                    Setting Up Your Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2.2" data-path="../../getting-started/run-a-wallaroo-application-docker.html">
            
                <a href="../../getting-started/run-a-wallaroo-application-docker.html">
            
                    
                    Run a Wallaroo Application in Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2.3" data-path="../../getting-started/installing-with-vagrant.html">
            
                <a href="../../getting-started/installing-with-vagrant.html">
            
                    
                    Installing with Vagrant
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.3.1" data-path="../../getting-started/vagrant-setup.html">
            
                <a href="../../getting-started/vagrant-setup.html">
            
                    
                    Setting Up Your Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.3.2" data-path="../../getting-started/run-a-wallaroo-application-vagrant.html">
            
                <a href="../../getting-started/run-a-wallaroo-application-vagrant.html">
            
                    
                    Run a Wallaroo Application in Vagrant
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2.4" data-path="../../getting-started/wallaroo-up.html">
            
                <a href="../../getting-started/wallaroo-up.html">
            
                    
                    Installing with Wallaroo Up
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.4.1" data-path="../../getting-started/run-a-wallaroo-application-wallaroo-up.html">
            
                <a href="../../getting-started/run-a-wallaroo-application-wallaroo-up.html">
            
                    
                    Run a Wallaroo Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2.5" data-path="../../getting-started/installing-from-source.html">
            
                <a href="../../getting-started/installing-from-source.html">
            
                    
                    Installing From Source
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.5.1" data-path="../../getting-started/setup.html">
            
                <a href="../../getting-started/setup.html">
            
                    
                    Setting up Your Environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.5.1.1" data-path="../../getting-started/linux-setup.html">
            
                <a href="../../getting-started/linux-setup.html">
            
                    
                    Ubuntu Installation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2.5.2" data-path="../../getting-started/run-a-wallaroo-application.html">
            
                <a href="../../getting-started/run-a-wallaroo-application.html">
            
                    
                    Run a Wallaroo Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2.6" data-path="../../getting-started/starting-a-new-shell.html">
            
                <a href="../../getting-started/starting-a-new-shell.html">
            
                    
                    Starting a new shell for Wallaroo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.7" data-path="../../getting-started/conclusion.html">
            
                <a href="../../getting-started/conclusion.html">
            
                    
                    Conclusion
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../../python/wallaroo-python-api.html">
            
                <a href="../../python/wallaroo-python-api.html">
            
                    
                    Wallaroo Python API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.3.1" data-path="../../python/running-a-wallaroo-python-application.html">
            
                <a href="../../python/running-a-wallaroo-python-application.html">
            
                    
                    Running a Wallaroo Python Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.2" data-path="../../python/writing-your-own-application.html">
            
                <a href="../../python/writing-your-own-application.html">
            
                    
                    Writing Your Own Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.3" data-path="../../python/writing-your-own-stateful-application.html">
            
                <a href="../../python/writing-your-own-stateful-application.html">
            
                    
                    Writing Your Own Stateful Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.4" data-path="../../python/writing-your-own-partitioned-stateful-application.html">
            
                <a href="../../python/writing-your-own-partitioned-stateful-application.html">
            
                    
                    Writing Your Own Partitioned Stateful Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.5" data-path="../../python/word-count.html">
            
                <a href="../../python/word-count.html">
            
                    
                    Word Count
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.6" data-path="../../python/interworker-serialization-and-resilience.html">
            
                <a href="../../python/interworker-serialization-and-resilience.html">
            
                    
                    Interworker Serialization and Resilience
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.7" data-path="../../python/using-connectors.html">
            
                <a href="../../python/using-connectors.html">
            
                    
                    Using Connectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3.8" data-path="../../python/api.html">
            
                <a href="../../python/api.html">
            
                    
                    Wallaroo Python API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.4" >
            
                <span>
            
                    
                    Debugging Python Wallaroo Applications
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.4.1" data-path="../../python/debugging.html">
            
                <a href="../../python/debugging.html">
            
                    
                    Debugging
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Wallaroo with Go</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../intro.html">
            
                <a href="../intro.html">
            
                    
                    Go API Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../getting-started/setting-up-your-environment.html">
            
                <a href="../getting-started/setting-up-your-environment.html">
            
                    
                    Setting up Your Environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="../getting-started/choosing-an-installation-option.html">
            
                <a href="../getting-started/choosing-an-installation-option.html">
            
                    
                    Choosing an Installation Option
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.2" data-path="../getting-started/installing-with-docker.html">
            
                <a href="../getting-started/installing-with-docker.html">
            
                    
                    Installing with Docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.2.1" data-path="../getting-started/docker-setup.html">
            
                <a href="../getting-started/docker-setup.html">
            
                    
                    Setting Up Your Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.2.2" data-path="../getting-started/run-a-wallaroo-go-application-docker.html">
            
                <a href="../getting-started/run-a-wallaroo-go-application-docker.html">
            
                    
                    Run a Wallaroo Application in Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2.3" data-path="../getting-started/installing-with-vagrant.html">
            
                <a href="../getting-started/installing-with-vagrant.html">
            
                    
                    Installing with Vagrant
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.3.1" data-path="../getting-started/vagrant-setup.html">
            
                <a href="../getting-started/vagrant-setup.html">
            
                    
                    Setting Up Your Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.3.2" data-path="../getting-started/run-a-wallaroo-go-application-vagrant.html">
            
                <a href="../getting-started/run-a-wallaroo-go-application-vagrant.html">
            
                    
                    Run a Wallaroo Go Application in Vagrant
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2.4" data-path="../getting-started/wallaroo-up.html">
            
                <a href="../getting-started/wallaroo-up.html">
            
                    
                    Installing with Wallaroo Up
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.4.1" data-path="../getting-started/run-a-wallaroo-go-application-wallaroo-up.html">
            
                <a href="../getting-started/run-a-wallaroo-go-application-wallaroo-up.html">
            
                    
                    Run a Wallaroo Go Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2.5" data-path="../getting-started/installing-from-source.html">
            
                <a href="../getting-started/installing-from-source.html">
            
                    
                    Installing From Source
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.5.1" data-path="../getting-started/setup.html">
            
                <a href="../getting-started/setup.html">
            
                    
                    Setting up Your Environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.5.1.1" data-path="../getting-started/linux-setup.html">
            
                <a href="../getting-started/linux-setup.html">
            
                    
                    Ubuntu Installation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2.5.2" data-path="../getting-started/run-a-wallaroo-go-application.html">
            
                <a href="../getting-started/run-a-wallaroo-go-application.html">
            
                    
                    Run a Wallaroo Go Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2.6" data-path="../getting-started/starting-a-new-shell.html">
            
                <a href="../getting-started/starting-a-new-shell.html">
            
                    
                    Starting a new shell for Wallaroo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.7" data-path="../getting-started/conclusion.html">
            
                <a href="../getting-started/conclusion.html">
            
                    
                    Conclusion
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="wallaroo-go-api.html">
            
                <a href="wallaroo-go-api.html">
            
                    
                    Wallaroo Go API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.3.1" data-path="writing-your-own-application.html">
            
                <a href="writing-your-own-application.html">
            
                    
                    Writing Your Own Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.2" data-path="writing-your-own-stateful-application.html">
            
                <a href="writing-your-own-stateful-application.html">
            
                    
                    Writing Your Own Stateful Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.3" data-path="word-count.html">
            
                <a href="word-count.html">
            
                    
                    Word Count
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.4" data-path="interworker-serialization-and-resilience.html">
            
                <a href="interworker-serialization-and-resilience.html">
            
                    
                    Interworker Serialization and Resilience
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.5" data-path="start-a-project.html">
            
                <a href="start-a-project.html">
            
                    
                    Start A Go Project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.6" data-path="api.html">
            
                <a href="api.html">
            
                    
                    Wallaroo Go API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Running Wallaroo</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../running-wallaroo/running-wallaroo.html">
            
                <a href="../../running-wallaroo/running-wallaroo.html">
            
                    
                    Running Wallaroo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../../running-wallaroo/autoscale.html">
            
                <a href="../../running-wallaroo/autoscale.html">
            
                    
                    Autoscale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../../running-wallaroo/resilience.html">
            
                <a href="../../running-wallaroo/resilience.html">
            
                    
                    Resilience
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="../../running-wallaroo/wallaroo-command-line-options.html">
            
                <a href="../../running-wallaroo/wallaroo-command-line-options.html">
            
                    
                    Command line options
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Appendix</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../../appendix/virtualenv.html">
            
                <a href="../../appendix/virtualenv.html">
            
                    
                    Wallaroo and Virtualenv
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../../appendix/tcp-decoders-and-encoders.html">
            
                <a href="../../appendix/tcp-decoders-and-encoders.html">
            
                    
                    TCP Decoders and Encoders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../../wallaroo-tools/giles-sender.html">
            
                <a href="../../wallaroo-tools/giles-sender.html">
            
                    
                    Sending Data over TCP with Giles Sender
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../../wallaroo-tools/giles-receiver.html">
            
                <a href="../../wallaroo-tools/giles-receiver.html">
            
                    
                    Receiving Data over TCP with Giles Receiver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="../../metrics/metrics-ui.html">
            
                <a href="../../metrics/metrics-ui.html">
            
                    
                    Monitoring Metrics with the Monitoring Hub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="../../appendix/decoding-giles-receiver-output.html">
            
                <a href="../../appendix/decoding-giles-receiver-output.html">
            
                    
                    Decoding Giles Receiver Output
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.7" data-path="../../appendix/wallaroo-and-long-running-data-processing-and-other-workflows.html">
            
                <a href="../../appendix/wallaroo-and-long-running-data-processing-and-other-workflows.html">
            
                    
                    Wallaroo and Long-Running Data Processing and Other Workflows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.8" data-path="../../appendix/wallaroo-in-docker-tips.html">
            
                <a href="../../appendix/wallaroo-in-docker-tips.html">
            
                    
                    Tips for using Wallaroo in Docker
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Legal</li>
        
        
    

    
        
        <li class="header">* Terms and Conditions</li>
        
        
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Writing Your Own Application</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="writing-your-own-wallaroo-go-application">Writing Your Own Wallaroo Go Application</h1>
<p>In this section, we will go over the components that are required in order to write a Wallaroo Go application. We will start with the stateless <code>reverse</code>application from the <a href="https://github.com/WallarooLabs/wallaroo/tree/release-0.5.3/examples/go/reverse/" target="_blank">examples</a> section, then move on to an application that maintains and modifies state.</p>
<h2 id="a-stateless-application---reverse-words">A Stateless Application - Reverse Words</h2>
<p>The <code>reverse</code> application is going to receive text as its input, reverse it, and then send out the reversed text to its sink. In order to do this, our application needs to provide the following functions:</p>
<ul>
<li>Input decoding - how to translate the incoming bytestream into a Go string</li>
<li>Computation - this is where the input string is going to get reversed</li>
<li>Output encoding - how to construct and format the bytestream that will be sent out by the sink</li>
</ul>
<h3 id="computation">Computation</h3>
<p>Let&apos;s start with the computation, because that&apos;s the purpose of the application:</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> Reverse <span class="hljs-keyword">struct</span> {}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *Reverse)</span> <span class="hljs-title">Name</span><span class="hljs-params">()</span> <span class="hljs-title">string</span></span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;reverse&quot;</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *Reverse)</span> <span class="hljs-title">Compute</span><span class="hljs-params">(data <span class="hljs-keyword">interface</span>{})</span> <span class="hljs-title">interface</span></span>{} {
  input := *(data.(*<span class="hljs-keyword">string</span>))

  <span class="hljs-comment">// string reversal taken from</span>
  <span class="hljs-comment">// https://groups.google.com/forum/#!topic/golang-nuts/oPuBaYJ17t4</span>

  n := <span class="hljs-number">0</span>
  <span class="hljs-keyword">rune</span> := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">rune</span>, <span class="hljs-built_in">len</span>(input))
  <span class="hljs-keyword">for</span> _, r := <span class="hljs-keyword">range</span> input {
    <span class="hljs-keyword">rune</span>[n] = r
    n++
  }
  <span class="hljs-keyword">rune</span> = <span class="hljs-keyword">rune</span>[<span class="hljs-number">0</span>:n]
  <span class="hljs-comment">// Reverse</span>
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n/<span class="hljs-number">2</span>; i++ {
    <span class="hljs-keyword">rune</span>[i], <span class="hljs-keyword">rune</span>[n<span class="hljs-number">-1</span>-i] = <span class="hljs-keyword">rune</span>[n<span class="hljs-number">-1</span>-i], <span class="hljs-keyword">rune</span>[i]
  }
  <span class="hljs-comment">// Convert back to UTF-8.</span>
  output := <span class="hljs-keyword">string</span>(<span class="hljs-keyword">rune</span>)

  <span class="hljs-keyword">return</span> output
}
</code></pre>
<p>A Computation has no state, so it only needs to define its name, and how to convert input data into output data. In this case, string reversal is done using some code we got from the <code>go-lang nuts</code> forum.</p>
<p>You&apos;ll notice that the type of argument to <code>Compute</code> is <code>interface {}</code>. Your data types are opaque to Wallaroo and could be of any type. For this reason, you&apos;ll see <code>interface {}</code> used in a number of places in the Wallaroo Go API.</p>
<h3 id="sink-encoder">Sink Encoder</h3>
<p>Next, we are going to define how the output gets constructed for the sink. It is important to remember that when using a TCP sink, Wallaroo sends its output over the network, so data going through the sink needs to be of type <code>[]byte</code>.</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> Encoder <span class="hljs-keyword">struct</span> {}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(e *Encoder)</span> <span class="hljs-title">Encode</span><span class="hljs-params">(data <span class="hljs-keyword">interface</span> {})</span> []<span class="hljs-title">byte</span></span> {
  msg := data.(<span class="hljs-keyword">string</span>)
  <span class="hljs-keyword">return</span> []<span class="hljs-keyword">byte</span>(msg + <span class="hljs-string">&quot;\n&quot;</span>)
</code></pre>
<h3 id="sourcedecoder">SourceDecoder</h3>
<p>Now, we also need to decode the incoming bytes of the source.</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> Decoder <span class="hljs-keyword">struct</span> {}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Decoder)</span> <span class="hljs-title">HeaderLength</span><span class="hljs-params">()</span> <span class="hljs-title">uint64</span></span> {
  <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Decoder)</span> <span class="hljs-title">PayloadLength</span><span class="hljs-params">(b []<span class="hljs-keyword">byte</span>)</span> <span class="hljs-title">uint64</span></span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">uint64</span>(binary.BigEndian.Uint32(b[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>]))
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d* Decoder)</span> <span class="hljs-title">Decode</span><span class="hljs-params">(b []<span class="hljs-keyword">byte</span>)</span> <span class="hljs-title">interface</span></span>{} {
  x := <span class="hljs-keyword">string</span>(b[:])
  <span class="hljs-keyword">return</span> &amp;x
}
</code></pre>
<p>This one is different. When using a TCP source, Wallaroo handles <em>streams of bytes</em>, and in order to do that efficiently, it uses a method called message framing. This means that Wallaroo requires input data to follow a special structure, as well as for the application to provide the mechanism with which to decode this data.</p>
<p>To read more about this, please refer to the <a href="../../appendix/tcp-decoders-and-encoders.html#creating-a-decoder">Creating A Decoder</a> section.</p>
<p>For our application purposes, we will simply define the structure and how it is going to get parsed:</p>
<ol>
<li>Input messages have the following structure: A fixed length <code>PAYLOAD_SIZE</code> followed by <code>PAYLOAD</code></li>
<li>Wallaroo requires three methods to parse this type of message:<ol>
<li><code>HeaderLength()</code>, which returns the number of bytes used for the <code>PAYLOAD_SIZE</code> in the message. This value tells Wallaroo how many bytes to read from the stream as <code>HEADER</code>.</li>
<li><code>PayloadLength([]byte)</code>, which reads <code>PAYLOAD_SIZE</code> bytestring of the size returned by <code>HeaderLength()</code> and computes the size of <code>PAYLOAD</code>. It then returns that size as an integer to Wallaroo, which will then read that many bytes from the stream.</li>
<li><code>Decode([]byte)</code>, which receives the remainder of the message, <code>MSG</code>, and decodes it into a Go object.</li>
</ol>
</li>
</ol>
<p>In our case:</p>
<ul>
<li><code>PAYLOAD_SIZE</code> is a big-endian unsigned 64-bit integer, so we return <code>4</code> from <code>HeaderLength()</code> and use <code>uint64(binary.BigEndian.Uint32(b[0:4]))</code> to read it as an integer.</li>
<li><code>PAYLOAD</code> is our text that we are going to reverse.</li>
</ul>
<h3 id="application-setup">Application Setup</h3>
<p>So now that we have input decoding, computation, and output decoding defined, how do we build it all into an application?</p>
<p>For this, two things are needed:</p>
<ol>
<li>An entry point for Wallaroo to create the application. This is the function <code>ApplicationSetup()</code> that you need to define.</li>
<li>The actual topology <code>ApplicationSetup()</code> is going to return for Wallaroo to create the application.</li>
</ol>
<h4 id="application-builder-and-pipelines">Application Builder and Pipelines</h4>
<p>An application is constructed of <a href="../../core-concepts/core-concepts.html#pipeline">pipelines</a> which, in turn, are constructed from a sequence of a <a href="../../core-concepts/core-concepts.html#source">source</a>, one or more <a href="../../core-concepts/core-concepts.html#computation">computations</a> and <a href="../../core-concepts/core-concepts.html#state-computation">state computations</a>, and optionally a <a href="../../core-concepts/core-concepts.html#sink">sink</a>. Our reverse application only has one pipeline, so we only need to create one:</p>
<pre><code class="lang-go">application := app.MakeApplication(<span class="hljs-string">&quot;Reverse Word&quot;</span>)
application.NewPipeline(<span class="hljs-string">&quot;Reverse&quot;</span>, app.MakeTCPSourceConfig(inHost, inPort, &amp;Decoder{})).
</code></pre>
<p>Each pipeline must have a source, and each source must have a decoder, so <code>NewPipeline</code> takes a name and a <code>TCPSourceConfig</code> instance as its arguments.</p>
<p>Next, we add the computation step:</p>
<pre><code class="lang-go">To(&amp;ReverseBuilder{}).
</code></pre>
<p>And finally, we add the sink, using a <code>TCPSinkConfig</code>:</p>
<pre><code class="lang-go">ToSink(app.MakeTCPSinkConfig(outHost, outPort, &amp;Encoder{}))
</code></pre>
<h3 id="the-applicationsetup-entry-point">The <code>ApplicationSetup</code> Entry Point</h3>
<p>After Wallaroo starts, it will try to execute its <code>ApplicationSetup()</code> function. This function is where the application builder steps from above are going to run.</p>
<pre><code class="lang-go"><span class="hljs-comment">//export ApplicationSetup</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ApplicationSetup</span><span class="hljs-params">()</span> *<span class="hljs-title">C</span>.<span class="hljs-title">char</span></span> {
  fs := flag.NewFlagSet(<span class="hljs-string">&quot;wallaroo&quot;</span>, flag.ExitOnError)
  inHostsPortsArg := fs.String(<span class="hljs-string">&quot;in&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;input host:port list&quot;</span>)
  outHostsPortsArg := fs.String(<span class="hljs-string">&quot;out&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;output host:port list&quot;</span>)

  fs.Parse(wa.Args[<span class="hljs-number">1</span>:])

  inHostsPorts := hostsPortsToList(*inHostsPortsArg)

  inHost := inHostsPorts[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
  inPort := inHostsPorts[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]

  outHostsPorts := hostsPortsToList(*outHostsPortsArg)
  outHost := outHostsPorts[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
  outPort := outHostsPorts[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]

  wa.Serialize = Serialize
  wa.Deserialize = Deserialize

  application := app.MakeApplication(<span class="hljs-string">&quot;Reverse Word&quot;</span>)
  application.NewPipeline(<span class="hljs-string">&quot;Reverse&quot;</span>, app.MakeTCPSourceConfig(inHost, inPort, &amp;Decoder{})).
    To(&amp;ReverseBuilder{}).
    ToSink(app.MakeTCPSinkConfig(outHost, outPort, &amp;Encoder{}))

  <span class="hljs-keyword">return</span> C.CString(application.ToJson())
}
</code></pre>
<p>Configuration objects are used to pass information about sources and sinks to the application builder.</p>
<h2 id="running-reverse">Running <code>reverse</code></h2>
<p>The complete example is available <a href="https://github.com/WallarooLabs/wallaroo/tree/release-0.5.3/examples/go/reverse/" target="_blank">here</a>. To run it, follow the <a href="https://github.com/WallarooLabs/wallaroo/tree/release-0.5.3/examples/go/reverse/README.md" target="_blank">Reverse application instructions</a></p>
<h2 id="next-steps">Next Steps</h2>
<p>To learn how to write a stateful application, continue to <a href="writing-your-own-stateful-application.html">Writing Your Own Stateful Application</a>.</p>
<p>Our Reverse application contains serialization and deserialization code that we didn&apos;t cover; to learn more, skip ahead to <a href="interworker-serialization-and-resilience.html">Interworker Serialization and Resilience</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="wallaroo-go-api.html" class="navigation navigation-prev " aria-label="Previous page: Wallaroo Go API">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="writing-your-own-stateful-application.html" class="navigation navigation-next " aria-label="Next page: Writing Your Own Stateful Application">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Writing Your Own Application","level":"5.3.1","depth":2,"next":{"title":"Writing Your Own Stateful Application","level":"5.3.2","depth":2,"path":"book/go/api/writing-your-own-stateful-application.md","ref":"book/go/api/writing-your-own-stateful-application.md","articles":[]},"previous":{"title":"Wallaroo Go API","level":"5.3","depth":1,"path":"book/go/api/wallaroo-go-api.md","ref":"book/go/api/wallaroo-go-api.md","articles":[{"title":"Writing Your Own Application","level":"5.3.1","depth":2,"path":"book/go/api/writing-your-own-application.md","ref":"book/go/api/writing-your-own-application.md","articles":[]},{"title":"Writing Your Own Stateful Application","level":"5.3.2","depth":2,"path":"book/go/api/writing-your-own-stateful-application.md","ref":"book/go/api/writing-your-own-stateful-application.md","articles":[]},{"title":"Word Count","level":"5.3.3","depth":2,"path":"book/go/api/word-count.md","ref":"book/go/api/word-count.md","articles":[]},{"title":"Interworker Serialization and Resilience","level":"5.3.4","depth":2,"path":"book/go/api/interworker-serialization-and-resilience.md","ref":"book/go/api/interworker-serialization-and-resilience.md","articles":[]},{"title":"Start A Go Project","level":"5.3.5","depth":2,"path":"book/go/api/start-a-project.md","ref":"book/go/api/start-a-project.md","articles":[]},{"title":"Wallaroo Go API","level":"5.3.6","depth":2,"path":"book/go/api/api.md","ref":"book/go/api/api.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["highlight","footnote-string-to-number","ga","codetabs"],"pluginsConfig":{"search":{},"codetabs":{},"footnote-string-to-number":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"ga":{"configuration":"auto","token":"UA-59652249-3"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"intro.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"footerTemplate":"©2017 All Rights Reserved, Wallaroo Labs"},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"book/go/api/writing-your-own-application.md","mtime":"2018-09-28T04:45:51.768Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-09-28T04:45:57.520Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

